%----- packages -----
\usepackage{amsthm}
\usepackage{array}
\usepackage{bm}
\usepackage[ruled]{algorithm}
\usepackage{algorithmicx}
\usepackage{algpascal}
\usepackage{algpseudocode}
\usepackage[cache=false]{minted}
\usepackage{listings}
\usepackage[export]{adjustbox}
\usepackage{color}
\usepackage{url}
\usepackage{verbatim}
\usepackage{xifthen}
\usepackage{tikz}
\usepackage{pxpgfmark}
\usetikzlibrary{cd}
\usetikzlibrary{fit}
\usetikzlibrary{matrix}
\usetikzlibrary{shapes.callouts}
\usetikzlibrary{automata}
\usepackage{changepage}
\usepackage{proof}
\usepackage[version=4]{mhchem}
\usepackage{cleveref}

%----- commands -----

% tikz sets
\tikzset{dottedboxgroup/.style={draw, densely dotted}}

% utilities
\newcommand*{\emphp}[1]{\textup{(}{#1}\textup{)}}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
  \node[shape=circle,draw,inner sep=1pt] (char) {\scriptsize $#1$};}}
\newcommand*\hwordspace{\hspace{10pt}}
\newcommand*\hcharspace{\hspace{0.5em}}
\newcommand*\widearraysep{\arraycolsep=1.4pt\def\arraystretch{2.2}}
\newcommand*\middlemid{\mathrel{}\middle|\mathrel{}}
\newcommand*\dquote{\texttt{\char`\"}}
\newcommand*\caret{\texttt{\^{}}}

% colors
\colorlet{lw-blue}{blue!70!black}
\colorlet{lw-orange}{orange!35!brown!80!darkgray}
\colorlet{lw-green}{green!40!black}
\colorlet{lw-red}{red!50!black}
\colorlet{darkred}{red!70!black}

% xypic
\def\objectstyle{\displaystyle}

% cite seen
\newcommand{\scite}[2][]{~\ifthenelse{\equal{#1}{}}{\cite{#2}}{\cite[#1]{#2}}}

% my columntype
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}

% math environment
\allowdisplaybreaks

% theorems
\newtheoremstyle{mytheorem}% name of the style to be used
  {\topsep}% measure of space to leave above the theorem. E.g.: 3pt
  {\topsep}% measure of space to leave below the theorem. E.g.: 3pt
  {}% name of font to use in the body of the theorem
  {0pt}% measure of space to indent
  {\bfseries}% name of head font
  {.}% punctuation between head and body
  { }% space after theorem head; " " = normal interword space
  {\thmname{#1 }\thmnumber{#2}\thmnote{ (#3)}}
\renewcommand{\qedsymbol}{\ensuremath\QED}
\expandafter\let\expandafter\oldproof\csname\string\proof\endcsname
\let\oldendproof\endproof
\renewenvironment{proof}[1][\proofname]{%
  \oldproof[\textbf{#1}]%
}{\oldendproof}
\theoremstyle{mytheorem}
\newcommand{\theoremsymbol}{\ensuremath\enclosesquare}
\newtheorem{_theorem}{Theorem}
\newenvironment{theorem}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_theorem}}{\begin{_theorem}[#1]}}
  {\hfill\theoremsymbol\end{_theorem}}
\newtheorem{_definition}[_theorem]{Definition}
\newenvironment{definition}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_definition}}{\begin{_definition}[#1]}}
  {\hfill\theoremsymbol\end{_definition}}
\newtheorem{_lemma}[_theorem]{Lemma}
\newenvironment{lemma}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_lemma}}{\begin{_lemma}[#1]}}
  {\hfill\theoremsymbol\end{_lemma}}
\newtheorem{_corollary}[_theorem]{Colorollary}
\newenvironment{corollary}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_corollary}}{\begin{_corollary}[#1]}}
  {\hfill\theoremsymbol\end{_corollary}}
\newtheorem{_proposition}[_theorem]{Proposition}
\newenvironment{proposition}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_proposition}}{\begin{_proposition}[#1]}}
  {\hfill\theoremsymbol\end{_proposition}}
\newtheorem{_example}[_theorem]{Example}
\newenvironment{example}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_example}}{\begin{_example}[#1]}}
  {\hfill\theoremsymbol\end{_example}}
\newtheorem{_principle}[_theorem]{Principle}
\newenvironment{principle}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_principle}}{\begin{_principle}[#1]}}
  {\hfill\theoremsymbol\end{_principle}}
\newtheorem{_claim}[_theorem]{Claim}
\newenvironment{claim}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_claim}}{\begin{_claim}[#1]}}
  {\hfill\theoremsymbol\end{_claim}}
\newtheorem{_conjecture}[_theorem]{Conjecture}
\newenvironment{conjecture}[1][]
  {\ifthenelse{\equal{#1}{}}{\begin{_conjecture}}{\begin{_conjecture}[#1]}}
  {\hfill\theoremsymbol\end{_conjecture}}

% listing
\lstset{
  language=C,
  breaklines=true,
  showstringspaces=false,
  tabsize=4,
  lineskip=-3pt,
  frame=trlb,
  numbers=left,
  xleftmargin=2em,
  captionpos=t,
  basicstyle={\ttfamily},
  stringstyle=\color{red},
  commentstyle=\color[rgb]{0,0.6,0},
  keywordstyle=\color{blue}
}

% minted
\usemintedstyle{vs}
\renewcommand{\theFancyVerbLine}
  {\rmfamily {\small \arabic{FancyVerbLine} }}
\newenvironment{mintedwrap}
  { \vspace{10pt}\begin{center}\begin{adjustwidth}{4em}{} %
  } %
  { \end{adjustwidth}\end{center} %
  }
